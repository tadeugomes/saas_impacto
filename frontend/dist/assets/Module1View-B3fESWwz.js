import{r,j as e}from"./index-QAfPwsmx.js";import{u as z,L as O,F as S,E as B,i as q}from"./indicators--VS1xAaI.js";import{E as P,C as o,B as d}from"./ExportButton-Cl7ppu3h.js";import{P as w}from"./PieChart-Cdpmp2SO.js";const t=[{code:"IND-1.01",name:"Tempo Médio de Espera",unit:"Horas",desc:"Tempo entre chegada e atracação"},{code:"IND-1.02",name:"Tempo Médio em Porto",unit:"Horas",desc:"Tempo total no porto"},{code:"IND-1.03",name:"Tempo Bruto de Atracação",unit:"Horas",desc:"Tempo de atracação até desatracação"},{code:"IND-1.04",name:"Tempo Líquido de Operação",unit:"Horas",desc:"Tempo efetivo de operação"},{code:"IND-1.05",name:"Taxa de Ocupação de Berços",unit:"%",desc:"Ocupação média dos berços"},{code:"IND-1.06",name:"Tempo Ocioso Médio",unit:"Horas",desc:"Tempo de paralisação"},{code:"IND-1.07",name:"Arqueação Bruta Média",unit:"GT",desc:"Tamanho médio dos navios"},{code:"IND-1.08",name:"Comprimento Médio",unit:"Metros",desc:"Comprimento médio dos navios"},{code:"IND-1.09",name:"Calado Máximo",unit:"Metros",desc:"Maior calado operacional"},{code:"IND-1.10",name:"Distribuição por Tipo",unit:"%",desc:"Por tipo de navegação"},{code:"IND-1.11",name:"Número de Atracações",unit:"Contagem",desc:"Total de atracações"},{code:"IND-1.12",name:"Índice de Paralisação",unit:"%",desc:"Tempo ocioso / tempo atracado"}];function V(){var N,I,h,D,j,b,_,g,f,y,T,v;const{selectedYear:c,selectedInstallation:m}=z(),[s,L]=r.useState({}),[i,p]=r.useState(!0),[u,x]=r.useState(null);return r.useEffect(()=>{(async()=>{var A,C;p(!0),x(null);try{const n=t.map(l=>q.queryIndicator({codigo_indicador:l.code,params:{ano:c,id_instalacao:m||void 0}})),M=await Promise.all(n),H={};M.forEach((l,E)=>{H[t[E].code]=l}),L(H)}catch(n){x(((C=(A=n.response)==null?void 0:A.data)==null?void 0:C.detail)||"Erro ao carregar indicadores")}finally{p(!1)}})()},[c,m]),i?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Módulo 1 - Operações de Navios"}),e.jsx(O,{})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Módulo 1 - Operações de Navios"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"12 indicadores de operações de navios seguindo padrão UNCTAD"})]}),e.jsx(P,{moduleCode:"1"})]}),e.jsx(S,{}),u&&e.jsx(B,{message:u,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{title:t[0].name,description:t[0].desc,unit:t[0].unit,isLoading:i,error:s["IND-1.01"]?null:"Carregando...",children:((N=s["IND-1.01"])==null?void 0:N.data)&&e.jsx(d,{labels:s["IND-1.01"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"Horas",data:s["IND-1.01"].data.slice(0,10).map(a=>a.tempo_medio_espera_horas)}],yAxisLabel:"Horas",horizontal:!0})}),e.jsx(o,{title:t[1].name,description:t[1].desc,unit:t[1].unit,isLoading:i,children:((I=s["IND-1.02"])==null?void 0:I.data)&&e.jsx(d,{labels:s["IND-1.02"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"Horas",data:s["IND-1.02"].data.slice(0,10).map(a=>a.tempo_medio_porto_horas)}],yAxisLabel:"Horas",horizontal:!0})}),e.jsx(o,{title:t[2].name,description:t[2].desc,unit:t[2].unit,isLoading:i,children:((h=s["IND-1.03"])==null?void 0:h.data)&&e.jsx(d,{labels:s["IND-1.03"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"Horas",data:s["IND-1.03"].data.slice(0,10).map(a=>a.tempo_bruto_atracacao_horas)}],yAxisLabel:"Horas",horizontal:!0})}),e.jsx(o,{title:t[3].name,description:t[3].desc,unit:t[3].unit,isLoading:i,children:((D=s["IND-1.04"])==null?void 0:D.data)&&e.jsx(d,{labels:s["IND-1.04"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"Horas",data:s["IND-1.04"].data.slice(0,10).map(a=>a.tempo_liquido_operacao_horas)}],yAxisLabel:"Horas",horizontal:!0})}),e.jsx(o,{title:t[4].name,description:t[4].desc,unit:t[4].unit,isLoading:i,children:((j=s["IND-1.05"])==null?void 0:j.data)&&e.jsx(d,{labels:s["IND-1.05"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"Taxa (%)",data:s["IND-1.05"].data.slice(0,10).map(a=>a.taxa_ocupacao_percentual)}],yAxisLabel:"%",horizontal:!0})}),e.jsx(o,{title:t[5].name,description:t[5].desc,unit:t[5].unit,isLoading:i,children:((b=s["IND-1.06"])==null?void 0:b.data)&&e.jsx(d,{labels:s["IND-1.06"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"Horas",data:s["IND-1.06"].data.slice(0,10).map(a=>a.tempo_ocioso_medio_horas)}],yAxisLabel:"Horas",horizontal:!0})}),e.jsx(o,{title:t[6].name,description:t[6].desc,unit:t[6].unit,isLoading:i,children:((_=s["IND-1.07"])==null?void 0:_.data)&&e.jsx(d,{labels:s["IND-1.07"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"GT",data:s["IND-1.07"].data.slice(0,10).map(a=>a.arqueacao_bruta_media)}],yAxisLabel:"GT",horizontal:!0})}),e.jsx(o,{title:t[7].name,description:t[7].desc,unit:t[7].unit,isLoading:i,children:((g=s["IND-1.08"])==null?void 0:g.data)&&e.jsx(d,{labels:s["IND-1.08"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"Metros",data:s["IND-1.08"].data.slice(0,10).map(a=>a.comprimento_medio_metros)}],yAxisLabel:"Metros",horizontal:!0})}),e.jsx(o,{title:t[8].name,description:t[8].desc,unit:t[8].unit,isLoading:i,children:(f=s["IND-1.09"])!=null&&f.data&&s["IND-1.09"].data.length>0?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-4xl font-bold text-primary",children:[s["IND-1.09"].data[0].calado_maximo_metros,"m"]}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Calado Máximo Operacional"})]})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Dados não disponíveis"})}),e.jsx(o,{title:t[9].name,description:t[9].desc,unit:t[9].unit,isLoading:i,children:((y=s["IND-1.10"])==null?void 0:y.data)&&e.jsx(w,{labels:[...new Set(s["IND-1.10"].data.map(a=>a.tipo_navegacao))],data:[...new Set(s["IND-1.10"].data.map(a=>a.qtd_atracacoes))],variant:"doughnut"})}),e.jsx(o,{title:t[10].name,description:t[10].desc,unit:t[10].unit,isLoading:i,children:((T=s["IND-1.11"])==null?void 0:T.data)&&e.jsx(d,{labels:s["IND-1.11"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"Atracações",data:s["IND-1.11"].data.slice(0,10).map(a=>a.total_atracacoes)}],yAxisLabel:"Contagem",horizontal:!0})}),e.jsx(o,{title:t[11].name,description:t[11].desc,unit:t[11].unit,isLoading:i,children:((v=s["IND-1.12"])==null?void 0:v.data)&&e.jsx(d,{labels:s["IND-1.12"].data.slice(0,10).map(a=>a.id_instalacao),datasets:[{label:"%",data:s["IND-1.12"].data.slice(0,10).map(a=>a.indice_paralisacao_percentual)}],yAxisLabel:"%",horizontal:!0})})]})]})}export{V as Module1View};
