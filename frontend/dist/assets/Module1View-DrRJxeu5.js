import{r as o,j as e}from"./index-BpC5fKLh.js";import{u as I,L as f,F as j,E as D,i as M}from"./indicators-CRvX9iZO.js";import{E}from"./BarChart-BHjfVXWF.js";import{I as S}from"./IndicatorDashboardCard-rHYHmTNb.js";const d=[{code:"IND-1.01",name:"Tempo Médio de Espera",unit:"Horas",desc:"Tempo entre chegada e atracação",chartType:"bar",valueField:"tempo_medio_espera_horas",labelField:"id_instalacao"},{code:"IND-1.02",name:"Tempo Médio em Porto",unit:"Horas",desc:"Tempo total no porto",chartType:"bar",valueField:"tempo_medio_porto_horas",labelField:"id_instalacao"},{code:"IND-1.03",name:"Tempo Bruto de Atracação",unit:"Horas",desc:"Tempo de atracação até desatracação",chartType:"bar",valueField:"tempo_bruto_atracacao_horas",labelField:"id_instalacao"},{code:"IND-1.04",name:"Tempo Líquido de Operação",unit:"Horas",desc:"Tempo efetivo de operação",chartType:"bar",valueField:"tempo_liquido_operacao_horas",labelField:"id_instalacao"},{code:"IND-1.05",name:"Taxa de Ocupação de Berços",unit:"%",desc:"Ocupação média dos berços",chartType:"bar",valueField:"taxa_ocupacao_percentual",labelField:"id_instalacao"},{code:"IND-1.06",name:"Tempo Ocioso Médio",unit:"Horas",desc:"Tempo de paralisação",chartType:"bar",valueField:"tempo_ocioso_medio_horas",labelField:"id_instalacao"},{code:"IND-1.07",name:"Arqueação Bruta Média",unit:"GT",desc:"Tamanho médio dos navios",chartType:"bar",valueField:"arqueacao_bruta_media",labelField:"id_instalacao"},{code:"IND-1.08",name:"Comprimento Médio",unit:"Metros",desc:"Comprimento médio dos navios",chartType:"bar",valueField:"comprimento_medio_metros",labelField:"id_instalacao"},{code:"IND-1.09",name:"Calado Máximo",unit:"Metros",desc:"Maior calado operacional",chartType:"metric",valueField:"calado_maximo_metros",labelField:"id_instalacao"},{code:"IND-1.10",name:"Distribuição por Tipo",unit:"%",desc:"Por tipo de navegação",chartType:"pie",valueField:"qtd_atracacoes",labelField:"tipo_navegacao"},{code:"IND-1.11",name:"Número de Atracações",unit:"Contagem",desc:"Total de atracações",chartType:"bar",valueField:"total_atracacoes",labelField:"id_instalacao"},{code:"IND-1.12",name:"Índice de Paralisação",unit:"%",desc:"Tempo ocioso / tempo atracado",chartType:"bar",valueField:"indice_paralisacao_percentual",labelField:"id_instalacao"}],C=r=>({codigo_indicador:r,nome:r,unidade:"",unctad:!1,data:[]});function w(){const{selectedYear:r,selectedInstallation:n}=I(),[v,g]=o.useState({}),[m,p]=o.useState(!0),[u,h]=o.useState(null),[x,T]=o.useState(""),[i,F]=o.useState("all");o.useEffect(()=>{(async()=>{var b,_;p(!0),h(null);try{const c=d.map(l=>M.queryIndicator({codigo_indicador:l.code,params:{ano:r,id_instalacao:n||void 0}}).catch(()=>C(l.code))),t=await Promise.all(c),s={};t.forEach((l,N)=>{s[d[N].code]=l}),g(s)}catch(c){const t=c,s=((_=(b=t==null?void 0:t.response)==null?void 0:b.data)==null?void 0:_.detail)||"Erro ao carregar indicadores";h(typeof s=="string"?s:"Erro ao carregar indicadores")}finally{p(!1)}})()},[r,n]);const y=o.useMemo(()=>i==="all"?d:d.filter(a=>a.code===i),[i]);return m?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Módulo 1 - Operações de Navios"}),e.jsx(f,{})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Módulo 1 - Operações de Navios"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"12 indicadores de operações de navios seguindo padrão UNCTAD"})]}),e.jsx(E,{moduleCode:"1"})]}),e.jsx(j,{}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Buscar na série"}),e.jsx("input",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-1",placeholder:"Filtrar nome no ranking",value:x,onChange:a=>T(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Indicador"}),e.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 mt-1",value:i,onChange:a=>F(a.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),d.map(a=>e.jsx("option",{value:a.code,children:a.name},a.code))]})]})]}),u&&e.jsx(D,{message:u,className:"mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:y.map(a=>e.jsx(S,{title:a.name,description:a.desc,unit:a.unit,isLoading:m,data:v[a.code],chartType:a.chartType,valueField:a.valueField,labelField:a.labelField,filterText:x,indicatorCode:a.code},a.code))})]})}export{w as Module1View};
