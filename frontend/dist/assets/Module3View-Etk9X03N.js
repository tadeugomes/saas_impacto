import{r as c,j as e}from"./index-QAfPwsmx.js";import{u as v,L as I,F as N,E as F,i as E}from"./indicators--VS1xAaI.js";import{E as _,C as y,B as b,g as D}from"./ExportButton-Cl7ppu3h.js";const l=[{code:"IND-3.01",name:"Empregos Portuários",unit:"Empregos",desc:"Total de empregos no setor portuário (RAIS)",valueField:"empregos_portuarios"},{code:"IND-3.02",name:"Paridade de Gênero",unit:"%",desc:"Percentual de mulheres no setor portuário",valueField:"percentual_feminino"},{code:"IND-3.04",name:"Taxa Emprego Temporário",unit:"%",desc:"Percentual de contratos temporários",valueField:"taxa_temporario"},{code:"IND-3.05",name:"Salário Médio",unit:"R$",desc:"Remuneração média mensal",valueField:"salario_medio"},{code:"IND-3.06",name:"Massa Salarial",unit:"R$",desc:"Massa salarial anual estimada",valueField:"massa_salarial_anual"},{code:"IND-3.12",name:"Participação Emprego Local",unit:"%",desc:"Participação do setor portuário no emprego total do município",valueField:"participacao_emprego_local"}];function S(a,t){return a[t]??a.valor??a.total??0}function R(a){return a.nome_municipio||a.municipio||a.id_municipio||a.id_instalacao||"N/A"}function M(){const{selectedYear:a,selectedInstallation:t}=v(),[g,h]=c.useState({}),[d,u]=c.useState(!0),[m,p]=c.useState(null);return c.useEffect(()=>{(async()=>{var o,i;u(!0),p(null);try{const r=l.map(n=>E.queryIndicator({codigo_indicador:n.code,params:{ano:a,id_instalacao:t||void 0}}).catch(()=>({data:[]}))),f=await Promise.all(r),x={};f.forEach((n,j)=>{x[l[j].code]=n}),h(x)}catch(r){p(((i=(o=r.response)==null?void 0:o.data)==null?void 0:i.detail)||"Erro ao carregar indicadores")}finally{u(!1)}})()},[a,t]),d?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Módulo 3 - Recursos Humanos"}),e.jsx(I,{})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Módulo 3 - Recursos Humanos"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"6 indicadores de recursos humanos"})]}),e.jsx(_,{moduleCode:"3"})]}),e.jsx(N,{}),m&&e.jsx(F,{message:m,className:"mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(s=>{const o=g[s.code],i=(o==null?void 0:o.data)&&o.data.length>0;return e.jsx(y,{title:s.name,description:s.desc,unit:s.unit,isLoading:d,children:i?e.jsx(b,{labels:o.data.slice(0,10).map(r=>R(r)),datasets:[{label:s.unit,data:o.data.slice(0,10).map(r=>S(r,s.valueField))}],yAxisLabel:s.unit,horizontal:!0,valueFormat:D(s.code)}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Dados não disponíveis"})},s.code)})})]})}export{M as Module3View};
