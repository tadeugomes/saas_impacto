import{r as l,j as e}from"./index-QAfPwsmx.js";import{u as f,L as j,F as v,E as I,i as b}from"./indicators--VS1xAaI.js";import{E as N,C as E,B as S,g as y}from"./ExportButton-Cl7ppu3h.js";const d=[{code:"IND-4.01",name:"Exportações",unit:"US$ FOB",desc:"Valor total das exportações",valueField:"valor_exportacoes_usd",labelField:"id_municipio"},{code:"IND-4.02",name:"Importações",unit:"US$ FOB",desc:"Valor total das importações",valueField:"valor_importacoes_usd",labelField:"id_municipio"},{code:"IND-4.03",name:"Balança Comercial",unit:"US$",desc:"Saldo comercial (Exp - Imp)",valueField:"balanca_comercial_usd",labelField:"id_municipio"},{code:"IND-4.04",name:"Peso Exportado",unit:"kg",desc:"Peso líquido das exportações",valueField:"peso_liquido_exportacoes_kg",labelField:"id_municipio"},{code:"IND-4.05",name:"Peso Importado",unit:"kg",desc:"Peso líquido das importações",valueField:"peso_liquido_importacoes_kg",labelField:"id_municipio"},{code:"IND-4.10",name:"Market Share",unit:"%",desc:"Participação no mercado nacional",valueField:"market_share_pct",labelField:"id_municipio"}];function D(t,i){return t[i]||0}function C(t,i){return t.nome_municipio||t[i]||t.id_instalacao||"N/A"}function P(){const{selectedYear:t,selectedInstallation:i}=f(),[h,_]=l.useState({}),[n,m]=l.useState(!0),[u,p]=l.useState(null);return l.useEffect(()=>{(async()=>{var o,r;m(!0),p(null);try{const s=d.map(c=>b.queryIndicator({codigo_indicador:c.code,params:{ano:t,id_instalacao:i||void 0}}).catch(()=>({data:[]}))),F=await Promise.all(s),x={};F.forEach((c,g)=>{x[d[g].code]=c}),_(x)}catch(s){p(((r=(o=s.response)==null?void 0:o.data)==null?void 0:r.detail)||"Erro ao carregar indicadores")}finally{m(!1)}})()},[t,i]),n?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Módulo 4 - Comércio Exterior"}),e.jsx(j,{})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Módulo 4 - Comércio Exterior"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"6 indicadores de comércio exterior"})]}),e.jsx(N,{moduleCode:"4"})]}),e.jsx(v,{}),u&&e.jsx(I,{message:u,className:"mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(a=>{const o=h[a.code],r=(o==null?void 0:o.data)&&o.data.length>0;return e.jsx(E,{title:a.name,description:a.desc,unit:a.unit,isLoading:n,children:r?e.jsx(S,{labels:o.data.slice(0,10).map(s=>C(s,a.labelField)),datasets:[{label:a.unit,data:o.data.slice(0,10).map(s=>D(s,a.valueField))}],yAxisLabel:a.unit,horizontal:!0,valueFormat:y(a.code)}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Dados não disponíveis"})},a.code)})})]})}export{P as Module4View};
