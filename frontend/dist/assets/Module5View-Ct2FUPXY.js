import{r as c,j as a}from"./index-QAfPwsmx.js";import{u as j,L as v,F as N,E as b,i as F}from"./indicators--VS1xAaI.js";import{E,C as _,B as y,g as B}from"./ExportButton-Cl7ppu3h.js";const l=[{code:"IND-5.01",name:"PIB Municipal",unit:"R$",desc:"PIB Total do Município",valueField:"pib_municipal"},{code:"IND-5.02",name:"PIB per Capita",unit:"R$/hab",desc:"PIB per capita do município",valueField:"pib_per_capita"},{code:"IND-5.03",name:"População",unit:"Hab",desc:"População municipal estimada",valueField:"populacao"},{code:"IND-5.06",name:"Intensidade Portuária",unit:"ton/R$",desc:"Razão Tonelada/PIB",valueField:"intensidade_portuaria"},{code:"IND-5.11",name:"Crescimento Tonelagem",unit:"%",desc:"Variação anual da tonelagem",valueField:"crescimento_tonelagem_pct"}];function D(e,i){return e[i]??e.valor??e.total??0}function P(e){return e.nome_municipio||e.id_municipio||e.id_instalacao||"N/A"}function L(){const{selectedYear:e,selectedInstallation:i}=j(),[g,h]=c.useState({}),[d,u]=c.useState(!0),[m,p]=c.useState(null);return c.useEffect(()=>{(async()=>{var o,r;u(!0),p(null);try{const s=l.map(n=>F.queryIndicator({codigo_indicador:n.code,params:{ano:e,id_instalacao:i||void 0}}).catch(()=>({data:[]}))),I=await Promise.all(s),x={};I.forEach((n,f)=>{x[l[f].code]=n}),h(x)}catch(s){p(((r=(o=s.response)==null?void 0:o.data)==null?void 0:r.detail)||"Erro ao carregar indicadores")}finally{u(!1)}})()},[e,i]),d?a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Módulo 5 - Impacto Econômico"}),a.jsx(v,{})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Módulo 5 - Impacto Econômico Regional"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"5 indicadores de impacto econômico regional"})]}),a.jsx(E,{moduleCode:"5"})]}),a.jsx(N,{}),m&&a.jsx(b,{message:m,className:"mb-6"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(t=>{const o=g[t.code],r=(o==null?void 0:o.data)&&o.data.length>0;return a.jsx(_,{title:t.name,description:t.desc,unit:t.unit,isLoading:d,children:r?a.jsx(y,{labels:o.data.slice(0,10).map(s=>P(s)),datasets:[{label:t.unit,data:o.data.slice(0,10).map(s=>D(s,t.valueField))}],yAxisLabel:t.unit,horizontal:!0,valueFormat:B(t.code)}):a.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Dados não disponíveis"})},t.code)})})]})}export{L as Module5View};
