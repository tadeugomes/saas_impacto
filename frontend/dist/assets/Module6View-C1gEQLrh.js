import{r as c,j as a}from"./index-QAfPwsmx.js";import{u as j,L as v,F,E as N,i as b}from"./indicators--VS1xAaI.js";import{E as S,C as _,B as R,g as y}from"./ExportButton-Cl7ppu3h.js";const l=[{code:"IND-6.01",name:"Arrecadação ICMS",unit:"R$",desc:"Total arrecadado de ICMS no município",valueField:"arrecadacao_icms"},{code:"IND-6.02",name:"Arrecadação ISS",unit:"R$",desc:"Total arrecadado de ISS no município",valueField:"arrecadacao_iss"},{code:"IND-6.03",name:"Receita Total",unit:"R$",desc:"Receita total municipal (FINBRA)",valueField:"receita_total"},{code:"IND-6.04",name:"Receita per Capita",unit:"R$/hab",desc:"Receita municipal por habitante",valueField:"receita_per_capita"},{code:"IND-6.06",name:"ICMS por Tonelada",unit:"R$/t",desc:"ICMS arrecadado por tonelada movimentada",valueField:"icms_por_tonelada"}];function C(t,o){return t[o]??t.valor??t.total??0}function E(t){return t.nome_municipio||t.id_municipio||t.porto||t.id_instalacao||"N/A"}function L(){const{selectedYear:t,selectedInstallation:o}=j(),[i,I]=c.useState({}),[u,m]=c.useState(!0),[p,x]=c.useState(null);return c.useEffect(()=>{(async()=>{var r,s;m(!0),x(null);try{const d=l.map(n=>b.queryIndicator({codigo_indicador:n.code,params:{ano:t,id_instalacao:o||void 0}}).catch(()=>({data:[]}))),f=await Promise.all(d),h={};f.forEach((n,g)=>{h[l[g].code]=n}),I(h)}catch(d){x(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.detail)||"Erro ao carregar indicadores")}finally{m(!1)}})()},[t,o]),u?a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Módulo 6 - Finanças Públicas"}),a.jsx(v,{})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Módulo 6 - Finanças Públicas"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"5 indicadores de finanças públicas"})]}),a.jsx(S,{moduleCode:"6"})]}),a.jsx(F,{}),p&&a.jsx(N,{message:p,className:"mb-6"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(e=>{var r;return a.jsx(_,{title:e.name,description:e.desc,unit:e.unit,isLoading:u,children:(r=i[e.code])!=null&&r.data&&i[e.code].data.length>0?a.jsx(R,{labels:i[e.code].data.slice(0,10).map(s=>E(s)),datasets:[{label:e.unit,data:i[e.code].data.slice(0,10).map(s=>C(s,e.valueField||""))}],yAxisLabel:e.unit,horizontal:!0,valueFormat:y(e.code)}):a.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Dados não disponíveis"})},e.code)})})]})}export{L as Module6View};
