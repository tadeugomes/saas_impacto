import{r as o,j as e}from"./index-QAfPwsmx.js";import{u as v,L as I,F as N,E as y,i as E}from"./indicators--VS1xAaI.js";import{E as F,C as b,B as S}from"./ExportButton-Cl7ppu3h.js";const d=[{code:"IND-7.01",name:"Índice de Eficiência Portuária",unit:"0-100",desc:"Índice composto de eficiência",valueField:"indice_eficiencia"},{code:"IND-7.02",name:"Índice de Relevância",unit:"0-100",desc:"Índice composto de relevância",valueField:"indice_relevancia"},{code:"IND-7.03",name:"Índice de Integração",unit:"0-100",desc:"Índice composto de integração",valueField:"indice_integracao"},{code:"IND-7.04",name:"Índice de Concentração",unit:"0-100",desc:"Índice de concentração",valueField:"indice_concentracao"}];function _(i,c){return i[c]||0}function A(){const{selectedYear:i,selectedInstallation:c}=v(),[h,f]=o.useState({}),[l,u]=o.useState(!0),[m,x]=o.useState(null);return o.useEffect(()=>{(async()=>{var t,n;u(!0),x(null);try{const s=d.map(r=>E.queryIndicator({codigo_indicador:r.code,params:{ano:i,id_instalacao:c||void 0}}).catch(()=>({data:[]}))),g=await Promise.all(s),p={};g.forEach((r,j)=>{p[d[j].code]=r}),f(p)}catch(s){x(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.detail)||"Erro ao carregar indicadores")}finally{u(!1)}})()},[i,c]),l?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Módulo 7 - Índices Sintéticos"}),e.jsx(I,{})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Módulo 7 - Índices Sintéticos"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"4 indicadores de índices sintéticos"})]}),e.jsx(F,{moduleCode:"7"})]}),e.jsx(N,{}),m&&e.jsx(y,{message:m,className:"mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(a=>{const t=h[a.code],n=(t==null?void 0:t.data)&&t.data.length>0;return e.jsx(b,{title:a.name,description:a.desc,unit:a.unit,isLoading:l,children:n?e.jsx(S,{labels:t.data.slice(0,10).map(s=>s.id_instalacao||"N/A"),datasets:[{label:a.unit,data:t.data.slice(0,10).map(s=>_(s,a.valueField))}],yAxisLabel:a.unit,horizontal:!0}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Dados não disponíveis"})},a.code)})})]})}export{A as Module7View};
