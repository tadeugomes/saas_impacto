import{r as u,j as e}from"./index-BpC5fKLh.js";import{u as v,L as y,F as I,E as N,i as E}from"./indicators-CRvX9iZO.js";import{E as b,C as F,B as _}from"./BarChart-BHjfVXWF.js";const m=[{code:"IND-7.01",name:"Índice de Eficiência Portuária",unit:"0-100",desc:"Índice composto de eficiência",valueField:"indice_eficiencia"},{code:"IND-7.02",name:"Índice de Relevância",unit:"0-100",desc:"Índice composto de relevância",valueField:"indice_relevancia"},{code:"IND-7.03",name:"Índice de Integração",unit:"0-100",desc:"Índice composto de integração",valueField:"indice_integracao"},{code:"IND-7.04",name:"Índice de Concentração",unit:"0-100",desc:"Índice de concentração",valueField:"indice_concentracao"}],S=a=>({codigo_indicador:a,nome:a,unidade:"",unctad:!1,data:[]});function D(a,o){const r=a[o];return typeof r=="number"?r:0}function C(a){return typeof a.id_instalacao=="string"?a.id_instalacao:"N/A"}function M(){const{selectedYear:a,selectedInstallation:o}=v(),[r,h]=u.useState({}),[x,p]=u.useState(!0),[f,g]=u.useState(null);return u.useEffect(()=>{(async()=>{var s,d;p(!0),g(null);try{const i=m.map(l=>E.queryIndicator({codigo_indicador:l.code,params:{ano:a,id_instalacao:o||void 0}}).catch(()=>S(l.code))),c=await Promise.all(i),n={};c.forEach((l,j)=>{n[m[j].code]=l}),h(n)}catch(i){const c=i,n=((d=(s=c==null?void 0:c.response)==null?void 0:s.data)==null?void 0:d.detail)||"Erro ao carregar indicadores";g(typeof n=="string"?n:"Erro ao carregar indicadores")}finally{p(!1)}})()},[a,o]),x?e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Módulo 7 - Índices Sintéticos"}),e.jsx(y,{})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Módulo 7 - Índices Sintéticos"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"4 indicadores de índices sintéticos"})]}),e.jsx(b,{moduleCode:"7"})]}),e.jsx(I,{}),f&&e.jsx(N,{message:f,className:"mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(t=>{const s=r[t.code],d=(s==null?void 0:s.data)&&s.data.length>0;return e.jsx(F,{title:t.name,description:t.desc,unit:t.unit,isLoading:x,children:d?e.jsx(_,{labels:s.data.slice(0,10).map(i=>C(i)),datasets:[{label:t.unit,data:s.data.slice(0,10).map(i=>D(i,t.valueField))}],yAxisLabel:t.unit,horizontal:!0}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Dados não disponíveis"})},t.code)})})]})}export{M as Module7View};
