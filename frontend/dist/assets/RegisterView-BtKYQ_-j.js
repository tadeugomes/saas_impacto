import{u as S,r as c,j as e,N as C,L as k}from"./index-BpC5fKLh.js";const m=[0,1,2];function P(){const{isAuthenticated:b,registerCompany:g,isLoading:d}=S(),[n,p]=c.useState(0),[a,N]=c.useState({empresa:"",cnpj:"",plano:"basic",nome_admin:"",email_admin:"",senha_admin:"",confirmar_senha:""}),[u,l]=c.useState("");if(b)return e.jsx(C,{to:"/dashboard",replace:!0});const r=(s,t)=>{N(o=>({...o,[s]:t}))},v=()=>n===0?!a.empresa.trim()||a.empresa.trim().length<2?"Informe o nome da empresa (mínimo 2 caracteres).":a.plano?null:"Selecione um plano.":n===1?a.nome_admin.trim()?!a.email_admin.trim()||!a.email_admin.includes("@")?"Informe um e-mail válido.":a.senha_admin.length<8?"A senha deve ter ao menos 8 caracteres.":a.senha_admin!==a.confirmar_senha?"As senhas não coincidem.":null:"Informe o nome do administrador.":null,y=async()=>{var x,h;const s=v();if(s){l(s);return}l("");const t=m.indexOf(n),o=m[t+1];if(o!==void 0){p(o);return}try{const{confirmar_senha:j,...i}=a;await g(i)}catch(j){const i=j,f=(h=(x=i==null?void 0:i.response)==null?void 0:x.data)==null?void 0:h.detail;l(typeof f=="string"?f:"Não foi possível concluir o cadastro.");return}},_=()=>{const s=m.indexOf(n),t=m[s-1];t!==void 0&&(l(""),p(t))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-primary-dark flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cadastro inicial"}),e.jsx("p",{className:"text-gray-500 mt-1 mb-6",children:"Crie sua conta e comece a usar o SaaS Impacto Portuário."}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm mb-5",children:u}),n===0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"empresa",children:"Nome da empresa"}),e.jsx("input",{id:"empresa",value:a.empresa,onChange:s=>r("empresa",s.target.value),className:"input",placeholder:"Porto Exemplo S.A.",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"cnpj",children:"CNPJ (opcional)"}),e.jsx("input",{id:"cnpj",value:a.cnpj,onChange:s=>r("cnpj",s.target.value),className:"input",placeholder:"12.345.678/0001-90"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"plano",children:"Plano"}),e.jsxs("select",{id:"plano",value:a.plano,onChange:s=>r("plano",s.target.value),className:"input",children:[e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"enterprise",children:"Enterprise"})]})]})]}),n===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"nome_admin",children:"Nome do administrador"}),e.jsx("input",{id:"nome_admin",value:a.nome_admin,onChange:s=>r("nome_admin",s.target.value),className:"input",placeholder:"Seu nome",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"email_admin",children:"E-mail do administrador"}),e.jsx("input",{id:"email_admin",type:"email",value:a.email_admin,onChange:s=>r("email_admin",s.target.value),className:"input",placeholder:"admin@empresa.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"senha_admin",children:"Senha"}),e.jsx("input",{id:"senha_admin",type:"password",value:a.senha_admin,onChange:s=>r("senha_admin",s.target.value),className:"input",placeholder:"••••••••",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"confirmar_senha",children:"Confirmar senha"}),e.jsx("input",{id:"confirmar_senha",type:"password",value:a.confirmar_senha,onChange:s=>r("confirmar_senha",s.target.value),className:"input",placeholder:"••••••••",required:!0})]})]}),n===2&&e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Empresa:"})," ",a.empresa]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"CNPJ:"})," ",a.cnpj||"não informado"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Plano:"})," ",a.plano]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Administrador:"})," ",a.nome_admin," (",a.email_admin,")"]})]}),e.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:_,disabled:n===0||d,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50",children:"Voltar"}),e.jsx("button",{type:"button",onClick:y,disabled:d,className:"btn btn-primary disabled:opacity-50",children:d?"Processando...":n===2?"Concluir cadastro":"Próximo"})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-gray-500",children:["Já tem conta? ",e.jsx(k,{to:"/login",className:"text-primary font-medium",children:"Entrar"})]})]})})}export{P as RegisterView};
